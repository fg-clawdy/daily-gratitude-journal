(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3106:function(e,t,n){Promise.resolve().then(n.bind(n,3679))},3679:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return D}});var a=n(7437),r=n(2265);let l="gratitude-entries",i={date:"",content:"",updatedAt:0};function s(){try{let e=localStorage.getItem(l);if(!e)return{version:"v1",entries:{}};let t=JSON.parse(e);if(!t.version||!t.entries)return{version:"v1",entries:{}};return{version:t.version,entries:t.entries}}catch(e){return console.error("Error reading from localStorage:",e),{version:"v1",entries:{}}}}function o(e,t){let n=s(),a={date:e,content:t.trim(),updatedAt:Date.now()};n.entries[e]=a,n.version="v1";try{let e=JSON.stringify(n);return e.length>4194304&&console.warn("Approaching localStorage limit. Consider exporting data."),localStorage.setItem(l,e),!0}catch(e){if(e instanceof Error&&"QuotaExceededError"===e.name)return console.error("localStorage quota exceeded"),!1;return console.error("Error saving to localStorage:",e),!1}}function c(e){let{current:t,max:n}=e,r=n-t;return(0,a.jsxs)("div",{className:"text-sm ".concat(r<=10?"text-red-500 font-semibold":r<=50?"text-orange-500":"text-muted"," transition-colors duration-200"),children:[r," characters remaining"]})}let d=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e,t,n)=>!!e&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim()},u=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),m=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),x=e=>{let t=m(e);return t.charAt(0).toUpperCase()+t.slice(1)};var h={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let g=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0;return!1},f=(0,r.forwardRef)((e,t)=>{let{color:n="currentColor",size:a=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:s="",children:o,iconNode:c,...u}=e;return(0,r.createElement)("svg",{ref:t,...h,width:a,height:a,stroke:n,strokeWidth:i?24*Number(l)/Number(a):l,className:d("lucide",s),...!o&&!g(u)&&{"aria-hidden":"true"},...u},[...c.map(e=>{let[t,n]=e;return(0,r.createElement)(t,n)}),...Array.isArray(o)?o:[o]])}),p=(e,t)=>{let n=(0,r.forwardRef)((n,a)=>{let{className:l,...i}=n;return(0,r.createElement)(f,{ref:a,iconNode:t,className:d("lucide-".concat(u(x(e))),"lucide-".concat(e),l),...i})});return n.displayName=x(e),n},b=p("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);function v(e){let{date:t,isReadOnly:n=!1}=e,l=t||new Date().toISOString().split("T")[0],d=l===new Date().toISOString().split("T")[0],u=!d,[m,x]=(0,r.useState)(""),[h,g]=(0,r.useState)(!1),[f,p]=(0,r.useState)("idle"),[v,w]=(0,r.useState)(n||u),y=(0,r.useRef)(null);(0,r.useEffect)(()=>{let e=s().entries[l]||{...i,date:l};x(e.content),g(e.content.trim().length>0)},[l]),(0,r.useEffect)(()=>()=>{y.current&&clearTimeout(y.current)},[]);let j=(0,r.useCallback)(e=>{y.current&&clearTimeout(y.current),p("saving"),y.current=setTimeout(()=>{o(l,e)&&(g(e.trim().length>0),p("saved"),setTimeout(()=>p("idle"),1500))},500)},[l]),N=new Date(l).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"});return(0,r.useEffect)(()=>{w(n||u)},[n,u]),(0,a.jsxs)("div",{className:"flex flex-col h-full min-h-[calc(100vh-120px)] px-4 py-6 max-w-2xl mx-auto",children:[(0,a.jsxs)("header",{className:"mb-6",children:[(0,a.jsxs)("div",{className:"text-center mb-2",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-foreground mb-1",children:d?"Today":N}),(0,a.jsx)("p",{className:"text-sm text-muted",children:d?N:"Viewing past entry"})]}),u&&h&&v&&(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsxs)("button",{onClick:()=>w(!1),className:"flex items-center gap-2 px-4 py-2 bg-pink text-white rounded-full hover:bg-pink-dark transition-colors min-h-[44px]","aria-label":"Edit entry",children:[(0,a.jsx)(b,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Edit"})]})})]}),!h&&!v&&(0,a.jsx)("div",{className:"mb-6 p-4 bg-lavender/50 rounded-xl text-center",children:(0,a.jsx)("p",{className:"text-hint italic",children:"What are you grateful for today?"})}),!h&&v&&(0,a.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center p-8",children:[(0,a.jsx)("p",{className:"text-hint text-lg italic mb-2",children:"No entry for this day"}),(0,a.jsx)("p",{className:"text-sm text-muted",children:"Take a moment to be grateful"})]})}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,a.jsx)("textarea",{value:m,onChange:e=>{let t=e.target.value;t.length<=500&&(x(t),j(t))},onBlur:()=>{y.current&&(clearTimeout(y.current),y.current=null),o(l,m),g(m.trim().length>0)},readOnly:v,placeholder:v?"":"Write what you're grateful for...",className:"\n            flex-1 w-full min-h-[200px] p-4\n            bg-white/80 rounded-xl shadow-card\n            text-lg text-foreground placeholder:text-hint\n            border-2 border-transparent\n            focus:border-pink focus:outline-none\n            resize-none transition-all duration-200\n            ".concat(v?"bg-lavender/30 cursor-default":"","\n          "),rows:5,"aria-label":"Gratitude entry"}),(0,a.jsxs)("div",{className:"mt-4 flex items-center justify-between",children:[(0,a.jsx)(c,{current:m.length,max:500}),(0,a.jsx)("div",{className:"flex items-center gap-3",children:"idle"!==f&&(0,a.jsx)("span",{className:"text-sm transition-opacity duration-300 ".concat("saved"===f?"text-mint":"text-hint"),children:"saving"===f?"Saving...":"Saved"})})]})]})]})}let w=p("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),y=p("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);function j(e){let{onSelectDate:t,selectedDate:n}=e,[l,i]=(0,r.useState)(new Date),o=(0,r.useMemo)(()=>new Set(function(){let e=s();return Object.keys(e.entries).filter(t=>{var n,a;return(null===(a=e.entries[t])||void 0===a?void 0:null===(n=a.content)||void 0===n?void 0:n.trim().length)>0})}()),[]),c=(0,r.useRef)(null),d=(0,r.useRef)(null),u=new Date(l.getFullYear(),l.getMonth(),1),m=new Date(l.getFullYear(),l.getMonth()+1,0),x=u.getDay(),h=m.getDate(),g=new Date().toISOString().split("T")[0],f=l.getFullYear()>new Date().getFullYear()||l.getFullYear()===new Date().getFullYear()&&l.getMonth()>new Date().getMonth(),p=(0,r.useCallback)(()=>{i(e=>new Date(e.getFullYear(),e.getMonth()-1,1))},[]),b=(0,r.useCallback)(()=>{f||i(e=>new Date(e.getFullYear(),e.getMonth()+1,1))},[f]),v=e=>{t("".concat(l.getFullYear(),"-").concat(String(l.getMonth()+1).padStart(2,"0"),"-").concat(String(e).padStart(2,"0")))},j=l.toLocaleDateString("en-US",{month:"long",year:"numeric"}),N=(0,r.useMemo)(()=>{let e=[];for(let t=0;t<x;t++)e.push(null);for(let t=1;t<=h;t++)e.push(t);return e},[x,h]),S=o.size>0;return(0,a.jsxs)("div",{className:"flex flex-col h-full px-4 py-6 max-w-2xl mx-auto",onTouchStart:e=>{d.current=null,c.current=e.targetTouches[0].clientX},onTouchMove:e=>{d.current=e.targetTouches[0].clientX},onTouchEnd:()=>{if(null===c.current||null===d.current)return;let e=c.current-d.current;e>50?b():e<-50&&p(),c.current=null,d.current=null},children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("button",{onClick:p,className:"p-3 rounded-full hover:bg-lavender active:bg-lavender-dark transition-colors min-h-[44px] min-w-[44px]","aria-label":"Previous month",children:(0,a.jsx)(w,{className:"w-6 h-6 text-foreground"})}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-foreground",children:j}),(0,a.jsx)("button",{onClick:b,disabled:f,className:"p-3 rounded-full hover:bg-lavender active:bg-lavender-dark transition-colors min-h-[44px] min-w-[44px] disabled:opacity-30 disabled:cursor-not-allowed","aria-label":"Next month",children:(0,a.jsx)(y,{className:"w-6 h-6 text-foreground"})})]}),!S&&(0,a.jsx)("div",{className:"mb-6 p-4 bg-lavender/50 rounded-xl text-center",children:(0,a.jsx)("p",{className:"text-hint italic",children:"Start writing to see your gratitude journey"})}),(0,a.jsxs)("div",{className:"bg-white/80 rounded-2xl shadow-card p-4",children:[(0,a.jsx)("div",{className:"grid grid-cols-7 mb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>(0,a.jsx)("div",{className:"text-center text-sm font-medium text-muted py-2",children:e},e))}),(0,a.jsx)("div",{className:"grid grid-cols-7 gap-1",children:N.map((e,t)=>{if(null===e)return(0,a.jsx)("div",{className:"h-12"},"empty-".concat(t));let r="".concat(l.getFullYear(),"-").concat(String(l.getMonth()+1).padStart(2,"0"),"-").concat(String(e).padStart(2,"0")),i=r===g,s=r===n,c=o.has(r),d=new Date(r)>new Date(g);return(0,a.jsxs)("button",{onClick:()=>v(e),disabled:d,className:"\n                  h-12 min-h-[48px] min-w-[48px] rounded-xl\n                  flex flex-col items-center justify-center\n                  transition-all duration-200\n                  ".concat(d?"opacity-30 cursor-not-allowed":"hover:bg-lavender cursor-pointer","\n                  ").concat(s?"bg-pink text-white hover:bg-pink-dark":"","\n                  ").concat(i&&!s?"bg-mint/50":"","\n                "),"aria-label":"".concat(e," ").concat(j).concat(i?" (Today)":"").concat(c?" - Entry available":""),children:[(0,a.jsx)("span",{className:"text-base font-medium ".concat(s?"text-white":"text-foreground"),children:e}),c&&(0,a.jsx)("div",{className:"w-1.5 h-1.5 rounded-full mt-0.5 ".concat(s?"bg-white":"bg-mint-dark")})]},e)})})]}),(0,a.jsx)("p",{className:"text-center text-hint text-xs mt-4 hidden sm:block md:hidden",children:"Swipe left or right to navigate months"})]})}let N=p("pen-line",[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),S=p("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);function k(e){let{currentView:t,onViewChange:n}=e;return(0,a.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 bg-white/95 backdrop-blur-sm shadow-soft border-t border-lavender z-50",role:"tablist","aria-label":"Main navigation",children:(0,a.jsxs)("div",{className:"flex justify-center items-center max-w-md mx-auto",children:[(0,a.jsxs)("button",{role:"tab","aria-selected":"today"===t,"aria-controls":"today-panel",id:"today-tab",onClick:()=>n("today"),className:"\n            flex-1 flex flex-col items-center justify-center\n            py-3 px-4 min-h-[56px] min-w-[100px]\n            transition-all duration-200\n            ".concat("today"===t?"text-pink":"text-muted hover:text-foreground","\n          "),children:[(0,a.jsx)(N,{className:"w-6 h-6 mb-1 transition-transform duration-200 ".concat("today"===t?"scale-110":"")}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Today"}),"today"===t&&(0,a.jsx)("div",{className:"absolute bottom-0 w-12 h-1 bg-pink rounded-t-full"})]}),(0,a.jsxs)("button",{role:"tab","aria-selected":"calendar"===t,"aria-controls":"calendar-panel",id:"calendar-tab",onClick:()=>n("calendar"),className:"\n            flex-1 flex flex-col items-center justify-center\n            py-3 px-4 min-h-[56px] min-w-[100px]\n            transition-all duration-200\n            ".concat("calendar"===t?"text-pink":"text-muted hover:text-foreground","\n          "),children:[(0,a.jsx)(S,{className:"w-6 h-6 mb-1 transition-transform duration-200 ".concat("calendar"===t?"scale-110":"")}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Calendar"}),"calendar"===t&&(0,a.jsx)("div",{className:"absolute bottom-0 w-12 h-1 bg-pink rounded-t-full"})]})]})})}function D(){let[e,t]=(0,r.useState)("today"),[n,l]=(0,r.useState)(null),[i,s]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=localStorage.getItem("gratitude-view");("today"===e||"calendar"===e)&&t(e)},[]);let o=n||new Date().toISOString().split("T")[0];return(0,a.jsxs)("main",{className:"min-h-screen pb-20",children:[(0,a.jsx)("div",{className:"pb-4",children:"today"===e?(0,a.jsx)("div",{id:"today-panel",role:"tabpanel","aria-labelledby":"today-tab",children:(0,a.jsx)(v,{date:o,isReadOnly:i})}):(0,a.jsx)("div",{id:"calendar-panel",role:"tabpanel","aria-labelledby":"calendar-tab",children:(0,a.jsx)(j,{onSelectDate:e=>{l(e),s(e!==new Date().toISOString().split("T")[0]),t("today")},selectedDate:n})})}),(0,a.jsx)(k,{currentView:e,onViewChange:e=>{t(e),localStorage.setItem("gratitude-view",e),"today"===e&&(l(null),s(!1))}})]})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=3106)}),_N_E=e.O()}]);